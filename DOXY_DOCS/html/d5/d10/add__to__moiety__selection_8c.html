<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>GLYLIB: src/add_to_moiety_selection.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="../../search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../dir_4c50504df4ef4681d4a5a0710190c908.html">src</a>
  </div>
</div>
<div class="contents">
<h1>add_to_moiety_selection.c File Reference</h1><code>#include &lt;<a class="el" href="../../d8/d8f/mylib_8h-source.html">mylib.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../da/dff/molecules_8h-source.html">molecules.h</a>&gt;</code><br>

<p>
<div class="dynheader">
Include dependency graph for add_to_moiety_selection.c:</div>
<div class="dynsection">
<p><center><img src="../../d0/d70/add__to__moiety__selection_8c__incl.png" border="0" usemap="#src/add_to_moiety_selection.c_map" alt=""></center>
<map name="src/add_to_moiety_selection.c_map">
<area shape="rect" href="../../dd/dea/mylib_8h.html" title="generic header file that loads utilities often needed by programmers" alt="" coords="501,81,565,105"><area shape="rect" href="../../d3/de6/molecules_8h.html" title="molecules.h" alt="" coords="933,81,1029,105"><area shape="rect" href="../../d9/d14/general_8h.html" title="Deprecated header file containing structures used by various functions within the..." alt="" coords="776,156,856,180"><area shape="rect" href="../../d1/d34/gly__codeutils_8h.html" title="header file that loads utilities to facilitate programming" alt="" coords="688,231,800,255"><area shape="rect" href="../../de/d42/gly__fileutils_8h.html" title="header file that loads utilities related to file I/O" alt="" coords="836,231,937,255"><area shape="rect" href="../../d4/ddb/geometries_8h.html" title="geometries.h" alt="" coords="931,156,1032,180"><area shape="rect" href="../../d1/d10/parameter__sets_8h.html" title="parameter_sets.h" alt="" coords="1056,156,1184,180"></map>
</div>

<p>
<a href="../../d4/d57/add__to__moiety__selection_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d10/add__to__moiety__selection_8c.html#e2f4892b279528b87b2fceb2af71e39a">add_to_moiety_selection</a> (<a class="el" href="../../d0/d18/structmoiety__selection.html">moiety_selection</a> *M, const char *SEL)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Parses input string and adds selection to a "moiety_selection" structure.<p>
This function might not be complete -- it is being written for a certain project, and should be expanded as needed.<p>
NOTE!!! The <a class="el" href="../../d0/d18/structmoiety__selection.html">moiety_selection</a> *MUST* be allocated and initialized before calling this function. Initialization means that sub-arrays must have had an initial allocation (so that realloc won't choke).<p>
It also must be initialized so that the "nX" variables start at zero. They need not be zero when they come to this function, but they need to be something real and not whatever garbage was left in memory.<p>
The current syntax is:<p>
number moiety-size-class moiety-designation optional_NOT designation_list<p>
Only one such 'sentence' is allowed per call.<p>
Syntax Examples:<p>
Add residues number 1, 2, 8 and 38 to the selection:<p>
4 Residue Numbers 1 2 8 38<p>
Add atoms not named O5 and O6<p>
2 Atoms Names -NOT- O5 O6<p>
NOTE: Regarding entries, the function inspects only the smallest number of characters necessary to differentiate keywords. So, for the moiety-size-class entry, the strings "Residue" "R" "Raisin" and "RESI" are all the same to the program.<p>
Acceptable values for input. The star (*) indicates the part of the function that will be written now (starting 20080910-ish):<p>
Number: integer Eventually, this could be written to also read "range", but not today.<p>
moiety-size-class: Atom Residue(*) Molecule Assembly Ensemble Group First letter differentiates.<p>
moiety-designation: Name Number Index First two letters differentiate (actually, using second character in the string presently). Number = the number in the input data set (e.g., pdb file). Index = the array index as stored internally to the program<p>
optional_NOT: -NOT- Must include all five characters, case sensitive. A single <a class="el" href="../../d0/d18/structmoiety__selection.html">moiety_selection</a> must be all positive or all negative. The calling function should decide before adding info to it. If SEL doesn't match, an error will be produced.<p>
designation_list: (varies) Space-separated list of names or numbers. Names must exactly match the string contained in "N". Currently, spaces are not permitted in the names. (someone could re-write to allow it...)<p>
More about the selections:<ul>
<li>Selections will be set only within the relevant class. For example, if the class is set to "residue", then only residues will be added to the structure; their associated atoms will not be explicitly included. Similarly, if the -NOT- option is chosen with class <a class="el" href="../../d0/d7e/structresidue.html">residue</a>, all residues except those listed will be added to the selection, but not the associated atoms.</li><li>Only the first "number" designations will be scanned from the designation_list. Any trailing characters or words will be ignored after the first "number" words are found.</li><li>Empty selection strings will be ingored and no error returned. The <a class="el" href="../../d0/d18/structmoiety__selection.html">moiety_selection</a> structure will be unaltered.</li><li>Errors will be returned if:<ul>
<li>The first word in SEL is not an integer</li><li>Fewer than "number" words are found in the designation list</li><li>No match is found for either class or designation</li><li>The existing <a class="el" href="../../d0/d18/structmoiety__selection.html">moiety_selection</a> is set to be a positive list but SEL is negative or vice-versa.</li><li>Note, of course, that this function merely parses a selection string. It has no knowledge whether the <a class="el" href="../../dc/d7f/structmolecule.html">molecule</a>, etc., actually contains the selected items. </li></ul>
</li></ul>

<p>Definition in file <a class="el" href="../../d4/d57/add__to__moiety__selection_8c-source.html">add_to_moiety_selection.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e2f4892b279528b87b2fceb2af71e39a"></a><!-- doxytag: member="add_to_moiety_selection.c::add_to_moiety_selection" ref="e2f4892b279528b87b2fceb2af71e39a" args="(moiety_selection *M, const char *SEL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_to_moiety_selection           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d18/structmoiety__selection.html">moiety_selection</a> *&nbsp;</td>
          <td class="paramname"> <em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>SEL</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
&lt; counter<p>
&lt; counter<p>
&lt; counter<p>
&lt; flag for negative selection<p>
&lt; number of designations in the list<p>
&lt; Temporary pointer<p>
&lt; Temporary string<p>
&lt; The trimmed selection<p>
&lt; The class<p>
&lt; The designation<p>
&lt; The designation_list<p>
Make sure there is no leading or trailing whitespace in S to cause confusion<p>
grab three items, place into number, class and designation<p>
&lt; Find length of first word -- this should be the integer<p>
&lt; Scan in the first integer<p>
&lt; Find length of second word -- this should be the class<p>
&lt; Find length of third word -- this should be the designation<p>
&lt; Find length of the ab'th item in the designation_list<p>
&lt; First letter of class differentiates <a class="el" href="../../dc/d7f/structmolecule.html">molecule</a>, <a class="el" href="../../d0/d7e/structresidue.html">residue</a> or <a class="el" href="../../da/d81/structatom.html">atom</a><p>
&lt; Second letter of designation differentiates name, number or index<p>
&lt; Second letter of designation differentiates name, number or index<p>
&lt; Second letter of designation differentiates name, number or index 
<p>Definition at line <a class="el" href="../../d4/d57/add__to__moiety__selection_8c-source.html#l00089">89</a> of file <a class="el" href="../../d4/d57/add__to__moiety__selection_8c-source.html">add_to_moiety_selection.c</a>.</p>

<p>References <a class="el" href="../../da/dff/molecules_8h-source.html#l00059">moiety_selection::ai</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00059">moiety_selection::an</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00060">moiety_selection::aN</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00055">moiety_selection::mi</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00055">moiety_selection::mn</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00056">moiety_selection::mN</a>, <a class="el" href="../../d7/d30/mywhine_8c-source.html#l00007">mywhine()</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00059">moiety_selection::nai</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00059">moiety_selection::nan</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00059">moiety_selection::naN</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00055">moiety_selection::nmi</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00055">moiety_selection::nmn</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00055">moiety_selection::nmN</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00057">moiety_selection::nri</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00057">moiety_selection::nrn</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00057">moiety_selection::nrN</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00054">moiety_selection::posneg</a>, <a class="el" href="../../db/dc8/string__utilities_8c-source.html#l00016">prune_string_whitespace()</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00057">moiety_selection::ri</a>, <a class="el" href="../../da/dff/molecules_8h-source.html#l00057">moiety_selection::rn</a>, and <a class="el" href="../../da/dff/molecules_8h-source.html#l00058">moiety_selection::rN</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="../../d5/d10/add__to__moiety__selection_8c_e2f4892b279528b87b2fceb2af71e39a_cgraph.png" border="0" usemap="#d5/d10/add__to__moiety__selection_8c_e2f4892b279528b87b2fceb2af71e39a_cgraph_map" alt=""></center>
<map name="d5/d10/add__to__moiety__selection_8c_e2f4892b279528b87b2fceb2af71e39a_cgraph_map">
<area shape="rect" href="../../d1/d34/gly__codeutils_8h.html#adce93feeb2a291f0fef33ffc4a8509d" title="Prints error message and exits(1)." alt="" coords="277,5,352,29"><area shape="rect" href="../../d1/d34/gly__codeutils_8h.html#f790a45562b331054052f3280f65dea9" title="prune_string_whitespace" alt="" coords="228,53,401,77"></map>
</div>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Sep 19 10:43:02 2008 for GLYLIB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
