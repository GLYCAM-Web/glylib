<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GLYLIB: src/mytime.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="../../dir_000002.html">src</a></div>
<h1>mytime.c</h1><a href="../../de/d79/mytime_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">// Function written by B. Lachele Foley, 2007</span>
00002 <span class="preprocessor">#include &lt;<a class="code" href="../../dd/dea/mylib_8h.html">mylib.h</a>&gt;</span>
00003 <span class="comment">//#include "../inc/mylib.h"</span>
00004 
00005 <span class="comment">// Usage:</span>
00006 <span class="comment">//      const char * mylocaltimestring,mytime(format)</span>
00007 <span class="comment">//              -for example:</span>
00008 <span class="comment">//      strcpy(mylocaltimestring,mytime("format"));</span>
00009 <span class="comment">// where:</span>
00010 <span class="comment">//      format is one of:</span>
00011 <span class="comment">//              [keyword]       [example]</span>
00012 <span class="comment">//              YYYYMMDD        20070321</span>
00013 <span class="comment">//              YYYYMMDDhhmmss  20070321152110</span>
00014 <span class="comment">//              pretty          Wed, 21 March, 2007</span>
00015 <span class="comment">//              longpretty      15:12:10, Wed, 21 March, 2007</span>
00016 
<a name="l00017"></a><a class="code" href="../../de/d79/mytime_8c.html#a0">00017</a> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="../../de/d79/mytime_8c.html#a0">mytime</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* timehow){
00018 <span class="keywordtype">char</span> timestring[1001],month[101],day[101];
00019  <span class="keywordtype">char</span>* tm;
00020 <span class="keywordtype">int</span> DATE;
00021 <span class="keyword">struct </span>tm TM;
00022 time_t LT;
00023 
00024 <span class="comment">// Get date</span>
00025 LT = time(NULL);
00026 TM = *localtime(&amp;LT);
00027 <span class="keywordflow">switch</span>(TM.tm_mon){
00028         <span class="keywordflow">case</span> 0:         strcpy(month,<span class="stringliteral">"January"</span>);
00029                         <span class="keywordflow">break</span>; 
00030         <span class="keywordflow">case</span> 1:         strcpy(month,<span class="stringliteral">"February"</span>);
00031                         <span class="keywordflow">break</span>; 
00032         <span class="keywordflow">case</span> 2:         strcpy(month,<span class="stringliteral">"March"</span>);
00033                         <span class="keywordflow">break</span>; 
00034         <span class="keywordflow">case</span> 3:         strcpy(month,<span class="stringliteral">"April"</span>);
00035                         <span class="keywordflow">break</span>; 
00036         <span class="keywordflow">case</span> 4:         strcpy(month,<span class="stringliteral">"May"</span>);
00037                         <span class="keywordflow">break</span>; 
00038         <span class="keywordflow">case</span> 5:         strcpy(month,<span class="stringliteral">"June"</span>);
00039                         <span class="keywordflow">break</span>; 
00040         <span class="keywordflow">case</span> 6:         strcpy(month,<span class="stringliteral">"July"</span>);
00041                         <span class="keywordflow">break</span>; 
00042         <span class="keywordflow">case</span> 7:         strcpy(month,<span class="stringliteral">"August"</span>);
00043                         <span class="keywordflow">break</span>; 
00044         <span class="keywordflow">case</span> 8:         strcpy(month,<span class="stringliteral">"September"</span>);
00045                         <span class="keywordflow">break</span>; 
00046         <span class="keywordflow">case</span> 9:         strcpy(month,<span class="stringliteral">"October"</span>);
00047                         <span class="keywordflow">break</span>; 
00048         <span class="keywordflow">case</span> 10:        strcpy(month,<span class="stringliteral">"November"</span>);
00049                         <span class="keywordflow">break</span>; 
00050         <span class="keywordflow">case</span> 11:        strcpy(month,<span class="stringliteral">"December"</span>);
00051                         <span class="keywordflow">break</span>; 
00052         <span class="keywordflow">default</span>:        <a class="code" href="../../d9/d66/mywhine_8c.html#a0">mywhine</a>(<span class="stringliteral">"Error assigning month in mytime.c"</span>);
00053         }
00054 <span class="keywordflow">switch</span>(TM.tm_wday){
00055         <span class="keywordflow">case</span> 0:         strcpy(day,<span class="stringliteral">"Monday"</span>);
00056                         <span class="keywordflow">break</span>;
00057         <span class="keywordflow">case</span> 1:         strcpy(day,<span class="stringliteral">"Tuesday"</span>);
00058                         <span class="keywordflow">break</span>;
00059         <span class="keywordflow">case</span> 2:         strcpy(day,<span class="stringliteral">"Wednesday"</span>);
00060                         <span class="keywordflow">break</span>;
00061         <span class="keywordflow">case</span> 3:         strcpy(day,<span class="stringliteral">"Thursday"</span>);
00062                         <span class="keywordflow">break</span>;
00063         <span class="keywordflow">case</span> 4:         strcpy(day,<span class="stringliteral">"Friday"</span>);
00064                         <span class="keywordflow">break</span>;
00065         <span class="keywordflow">case</span> 5:         strcpy(day,<span class="stringliteral">"Saturday"</span>);
00066                         <span class="keywordflow">break</span>;
00067         <span class="keywordflow">case</span> 6:         strcpy(day,<span class="stringliteral">"Sunday"</span>);
00068                         <span class="keywordflow">break</span>;
00069         <span class="keywordflow">default</span>:        <a class="code" href="../../d9/d66/mywhine_8c.html#a0">mywhine</a>(<span class="stringliteral">"Error assigning week day in mytime.c"</span>);
00070         }
00071 <span class="keywordflow">if</span>(strcmp(timehow,<span class="stringliteral">"YYYYMMDD"</span>)==0){
00072 <span class="comment">//      YYYYMMDD        20070321</span>
00073         <a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>=19000000 + TM.tm_year*10000 + (TM.tm_mon+1)*100 + TM.tm_mday;
00074         sprintf(timestring,<span class="stringliteral">"%d"</span>,<a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>);
00075         }
00076 <span class="keywordflow">if</span>(strcmp(timehow,<span class="stringliteral">"YYYYMMDDhhmmss"</span>)==0){
00077 <span class="comment">//      YYYYMMDDhhmmss  20070321152110</span>
00078         <a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>=190000 + TM.tm_year*100 + (TM.tm_mon+1);
00079         sprintf(timestring,<span class="stringliteral">"%d"</span>,<a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>);
00080         <a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>=TM.tm_mday*1000000 + 10000*TM.tm_hour + 100*TM.tm_min + TM.tm_sec;
00081         sprintf(timestring,<span class="stringliteral">"%s%d"</span>,timestring,<a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>);
00082         }
00083 <span class="keywordflow">if</span>(strcmp(timehow,<span class="stringliteral">"pretty"</span>)==0){
00084 <span class="comment">//      pretty          Wednesday, 21 March, 2007</span>
00085         <a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>=1900+TM.tm_year;
00086         sprintf(timestring,<span class="stringliteral">"%s, %d %s, %d"</span>,day,TM.tm_mday,month,<a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>);
00087         }
00088 <span class="keywordflow">if</span>(strcmp(timehow,<span class="stringliteral">"longpretty"</span>)==0){
00089 <span class="comment">//      longpretty      15:12:10, Wednesday, 21 March, 2007</span>
00090         <a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>=1900+TM.tm_year;
00091         sprintf(timestring,<span class="stringliteral">"%02d:%02d:%02d, %s, %d %s, %d"</span>,TM.tm_hour,TM.tm_min,\
00092 TM.tm_sec,day,TM.tm_mday,month,<a class="code" href="../../d7/d40/load__pdb_8h.html#a12">DATE</a>);
00093         } 
00094  tm = timestring;
00095 <span class="keywordflow">return</span> tm;
00096 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Jul 21 17:08:02 2008 for GLYLIB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
